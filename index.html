
<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PogodnyWieczorek - scenariusze gier i zabaw</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/all_styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <!-- Wymusza, aby przeglÄ…darka nie cache'owaÅ‚a strony -->
    <meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate, max-age=0" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
</head>
<body>

<div id="navigation-placeholder"></div>

<!-- About Section -->
<section id="about" class="page-section background-image-section index-bg">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center">
                <h2 class="section-heading text-uppercase">Gry i zabawy na kaÅ¼dÄ… okazjÄ™</h2>
                <p class="text-muted"> 
                    Witaj na naszej stronie! Znajdziesz tutaj gry i zabawy integracyjne dla rÃ³Å¼nych grup wiekowych. 
                    Przekonaj siÄ™, jak przeksztaÅ‚ciÄ‡ zwykÅ‚e spotkania w niezapomniane chwile peÅ‚ne radoÅ›ci i integracji!
                </p>
            </div>
        </div>
    </div>
</section>

<div id="menu-placeholder"></div>

<!-- KARUZELA -->
<div class="container mt-5">
  <h2 class="text-center mb-4">Zainspiruj siÄ™!</h2>
  <div id="gamesCarousel" class="carousel slide" data-ride="carousel">
    <div class="carousel-inner" id="games-container">
      <!-- Gry zostanÄ… dodane przez JavaScript -->
    </div>

    <a class="carousel-control-prev" href="#gamesCarousel" role="button" data-slide="prev">
      <span class="carousel-control-prev-icon"></span>
    </a>
    <a class="carousel-control-next" href="#gamesCarousel" role="button" data-slide="next">
      <span class="carousel-control-next-icon"></span>
    </a>
  </div>
</div>

<!-- DoÅ‚Ä…cz gotowy szablon modala -->
<div id="game-modal-placeholder"></div>

<!-- DoÅ‚Ä…czenie dynamicznie Stopki -->
<div id="footer-placeholder"></div>

<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<!-- Skrypty -->
<script src="js/modal.js"></script>

<!-- Skrypt Navigation -->
<script>
document.addEventListener("DOMContentLoaded", function() {
  fetch("partials/navigation.html")
    .then(response => response.text())
    .then(data => {
      document.getElementById("navigation-placeholder").innerHTML = data;
    })
    .catch(error => console.error("BÅ‚Ä…d wczytywania nawigacji:", error));
});
</script>

<!-- Skrypt Navigation placeholder -->
<script>
fetch('partials/gameModal.html')
  .then(response => response.text())
  .then(data => {
    document.getElementById('game-modal-placeholder').innerHTML = data;
  })
  .catch(err => console.error('BÅ‚Ä…d wczytywania modala:', err));
</script>

<!-- Skrypt Stopka -->
<script>
fetch("partials/footer.html")
  .then(response => response.text())
  .then(data => {
    document.getElementById("footer-placeholder").innerHTML = data;
    // po wczytaniu stopki ustaw aktualny rok
    document.getElementById("current-year").textContent = new Date().getFullYear();
  })
  .catch(error => console.error("BÅ‚Ä…d wczytywania stopki:", error));
</script>

<script>
fetch("partials/menu.html")
  .then(response => response.text())
  .then(data => {
    document.getElementById("menu-placeholder").innerHTML = data;

    // Opcjonalnie: podÅ›wietl aktywny link w menu
    const currentPage = window.location.pathname.split("/").pop();
    document.querySelectorAll("#menu-placeholder .nav-link").forEach(link => {
      if (link.getAttribute("href") === currentPage) {
        link.classList.add("active");
      } else {
        link.classList.remove("active");
      }
    });
  })
  .catch(error => console.error("BÅ‚Ä…d wczytywania menu:", error));
</script>

<script>
document.addEventListener("DOMContentLoaded", function () {

  // ðŸ”¹ Funkcja do wczytywania gier z JSON
  function loadGames() {
    fetch("games/games.json")
      .then(res => res.json())
      .then(games => {
        const container = document.getElementById("games-container");
        const isMobile = /Mobile|Android|iPhone|iPad/i.test(navigator.userAgent);
        const chunkSize = isMobile ? 1 : 3;

        for (let i = 0; i < games.length; i += chunkSize) {
          const chunk = games.slice(i, i + chunkSize);
          const activeClass = i === 0 ? "active" : "";

          const rowHTML = chunk.map(game => `
            <div class="col-md-4">
              <div class="card mb-4">
                <img src="${game.image}" class="card-img-top" alt="${game.title}" style="height: 200px; object-fit: cover;">
                <div class="card-body d-flex flex-column">
                  <h5 class="card-title">${game.title}</h5>
                  <p class="card-text">${game.description}</p>
                  <p class="card-text"><strong>Potrzebny sprzÄ™t:</strong> ${game.equipment}</p>
                  <button class="btn btn-sm btn-outline-secondary read-more"
                    data-title="${game.title}"
                    data-description="${game.description}"
                    data-image="${game.image}"
                    data-equipment="${game.equipment}"
                    data-variety="${game.variety}"
                    data-comment="${game.comment}">
                    Czytaj dalej
                  </button>
                </div>
              </div>
            </div>
          `).join("");

          const carouselItem = document.createElement("div");
          carouselItem.className = `carousel-item ${activeClass}`;
          carouselItem.innerHTML = `<div class="row">${rowHTML}</div>`;
          container.appendChild(carouselItem);
        }
      })
      .catch(error => console.error("BÅ‚Ä…d wczytywania gier:", error));
  }

  // ðŸ”¹ ObsÅ‚uga modalu
  document.addEventListener("click", (event) => {
    if (event.target.classList.contains("read-more")) {
      const button = event.target;
      const modal = $("#gameModal");

      // ðŸ”¹ Wstawianie treÅ›ci modala
      modal.find("#modal-title").text(button.dataset.title);
      modal.find("#modal-image").attr("src", button.dataset.image).attr("alt", button.dataset.title);
      modal.find("#modal-description").html(button.dataset.description);
      modal.find("#modal-equipment").text(button.dataset.equipment);

      // ðŸ”¹ Urozmaicenie
      if (button.dataset.variety && button.dataset.variety !== "null" && button.dataset.variety.trim() !== "") {
        modal.find("#modal-variety-row").show();
        modal.find("#modal-variety").text(button.dataset.variety);
      } else {
        modal.find("#modal-variety-row").hide();
      }

      // ðŸ”¹ Uwaga
      if (button.dataset.comment && button.dataset.comment !== "null" && button.dataset.comment.trim() !== "") {
        modal.find("#modal-comment-row").show();
        modal.find("#modal-comment").text(button.dataset.comment);
      } else {
        modal.find("#modal-comment-row").hide();
      }

      // ðŸ”¹ PokaÅ¼ modal
      modal.modal("show");

      // ðŸ”¹ WymuÅ› scroll w modal-body i ustaw max-height
      modal.find('.modal-body').css({
        'max-height': '80vh',
        'overflow-y': 'auto'
      });

      // ðŸ”¹ PrzewiÅ„ modal do gÃ³ry po peÅ‚nym otwarciu
      modal.off('shown.bs.modal').on('shown.bs.modal', function () {
        $(this).scrollTop(0); // przewiÅ„ caÅ‚y modal
      });

    }
  });

  // ðŸ”¹ Uruchom wczytywanie gier po zaÅ‚adowaniu strony
  loadGames();

});
</script>


<script>
  // Delegacja zdarzenia dla modala dynamicznie wczytywanego
$(document).on('shown.bs.modal', '#gameModal', function () {
    $(this).find('.modal-body').scrollTop(0);
});
</script>


</body>
</html>

